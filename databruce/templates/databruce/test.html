{% extends "databruce/base.html" %}
{% load static %}
{% block title %}
  Test
{% endblock title %}
{% block extrajs %}
  <link href="https://cdn.datatables.net/columncontrol/1.0.7/css/columnControl.dataTables.min.css"
        rel="stylesheet">
  <script src="https://cdn.datatables.net/columncontrol/1.0.7/js/dataTables.columnControl.min.js"></script>
{% endblock extrajs %}
{% block content %}
  <h4>Songs</h4>
  <div class="table-responsive">
    <table id="myTable"
           width="100%"
           class="table table-striped table-bordered dt-responsive compact nowrap">
      <thead>
        <tr>
          <th class="all" scope="col">Date</th>
          <th class="all" scope="col">Act</th>
          <th class="min-tablet-l" scope="col">Venue</th>
          <th class="min-tablet-l" scope="col">Tour</th>
          <th class="min-tablet-l" scope="col">Position</th>
          <th class="min-tablet-l" scope="col">Gap</th>
          <th class="min-tablet-l" scope="col">Set</th>
          <th class="min-tablet-l" scope="col">Prev</th>
          <th class="min-tablet-l" scope="col">Next</th>
          <th class="min-tablet-l text-nowrap" scope="col">Note</th>
        </tr>
      </thead>
    </table>
  </div>
  <script>
    $(document).ready(function() {
      var table = $('#myTable').DataTable(
        {
          layout: layout,
          columnControl: ['searchDropdown'],
          searchDelay: 0,
          serverSide: true,
          ajax: {
            'url': '/api/v1/songspage/?id=164&format=datatables',
          },
          columns: [
            {'data': 'current.event.date', 'name': 'current.event.id'},
            {'data': 'current.event.artist', 'name': 'current.event.artist.name'},
            {'data': 'current.event.venue', 'name': 'current.event.venue.name'},
            {'data': 'current.event.tour', 'name': 'current.event.tour.name'},
            {'data': 'current.position', 'name': 'current.position'},
            {'data': 'current.last', 'name': 'current.last'},
            {'data': 'current.set_name', 'name': 'current.set_name'},
            {'data': 'prev', 'name': 'prev.song.name'},
            {'data': 'next', 'name': 'next.song.name'},
            {'data': 'current.song_note', 'name': 'current.song_note'},
          ]
        }
      );
    });
  </script>
{% endblock content %}

{% extends "databruce/category.html" %}
{% block title %}
  States
{% endblock title %}
{% block info_row %}
  <div class="text-2xl">States</div>
  <div class="text-base">States that Bruce has played in</div>
{% endblock info_row %}
{% block table_id %}
  stateTable
{% endblock table_id %}
{% block table %}
  <thead>
    <tr>
      <th class="text-center" scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Country</th>
      <th scope="col">First</th>
      <th scope="col">Last</th>
    </tr>
  </thead>
  <tbody>
    {% for state in states %}
      <tr>
        <td class="text-center">{{ state.num_events }}</td>
        <td>
          <a href="{% url "state_details" id=state.id %}">{{ state.name }}</a>
        </td>
        <td>
          {% if state.country %}
            <a href="{% url "country_details" id=state.country.id %}">{{ state.country }}</a>
          {% endif %}
        </td>
        <td data-sort="{{ state.first.get_date }}"
            data-filter="{{ state.first.get_date }}">
          <a href="{% url "event_details" id=state.first.id %}">{{ state.first.get_date }}</a>
        </td>
        <td data-sort="{{ state.last.get_date }}"
            data-filter="{{ state.last.get_date }}">
          <a href="{% url "event_details" id=state.last.id %}">{{ state.last.get_date }}</a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
{% endblock table %}
{% block scripts %}
  <script>
    $(document).ready(function () {
      new DataTable('#stateTable', {
        layout: getDatatableLayout(),
        columnDefs: [
          { targets: [0], width: '1rem' },
          { targets: [3,4], type: 'date' },
        ],
      });
    })
  </script>
{% endblock scripts %}

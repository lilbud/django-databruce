{% extends "databruce/base.html" %}
{% block title %}
    Event Runs
{% endblock title %}
{% block content %}
    <div class="row mb-4">
        <div class="col">
            <h4>Event Runs</h4>
            <h6>A 'run' is multiple events on consecutive days at the same venue by the same band.</h6>
        </div>
    </div>
    <div class="row mb-4">
        <div class="card">
            <div class="card-body">
                <div class="col">
                    <div class="table-responsive p-0">
                        <table class="table table display nowrap" id="table">
                            <thead>
                                <tr class="custom">
                                    <th scope="col">Name</th>
                                    <th scope="col">Band</th>
                                    <th scope="col">Venue</th>
                                    <th scope="col"class="text-center">Events</th>
                                    <th scope="col">First</th>
                                    <th scope="col">Last</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for run in runs %}
                                    <tr>
                                        <td>{{ run.name }}</td>
                                        <td>
                                            <a href="{% url "databruce:band_details" id=run.band.id %}">{{ run.band.name }}</a>
                                        </td>
                                        <td>
                                            <a href="{% url "databruce:venue_details" id=run.first.venue.id %}">{{ run.first.venue }}</a>
                                        </td>
                                        <td class="text-center">{{ run.num_shows }}</td>
                                        <td>
                                            <a data-bs-toggle="tooltip"
                                               data-bs-placement="top"
                                               data-bs-html="true"
                                               data-bs-title="<div>{{ run.last }}<br>{{ run.last.venue }}</div>"
                                               href="{% url "databruce:event_details" event=run.first.id %}">{{ run.first }}</a>
                                        </td>
                                        <td>
                                            <a data-bs-toggle="tooltip"
                                               data-bs-placement="top"
                                               data-bs-html="true"
                                               data-bs-title="<div>{{ run.last }}<br>{{ run.last.venue }}</div>"
                                               href="{% url "databruce:event_details" event=run.last.id %}">{{ run.last }}</a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
      // custom searchBuilder columns definition
      layout.topEnd.features[1].buttons[0].config.columns = [1, 2];
    
        $(document).ready(function () {
            new DataTable('#table', {
                layout: layout,
                order: [[4, 'asc']],
            });
        });
    </script>
{% endblock content %}

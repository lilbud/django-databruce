{% extends "databruce/base.html" %}
{% load crispy_forms_tags %}
{% block title %}
  Events &gt; Search
{% endblock title %}
{% block content %}
  <div class="col">
    <form action="{% url 'databruce:adv_search' %}"
          method="post"
          id="search-form">
      {% csrf_token %}
      <div class="row mb-3">
        {{ form.first_date.label_tag }}
        <div class="col-5 col-md-2">{{ form.first_date }}</div>
      </div>
      <div class="row mb-3">
        {{ form.last_date.label_tag }}
        <div class="col-5 col-md-2">{{ form.last_date }}</div>
      </div>
      <div class="row mb-3">
        {{ form.month.label_tag }}
        <div class="col-5 col-md-1">{{ form.month }}</div>
      </div>
      <div class="row mb-3">
        {{ form.day.label_tag }}
        <div class="col-3 col-md-1">{{ form.day }}</div>
      </div>
      <div class="row mb-3">
        {{ form.day_of_week.label_tag }}
        <div class="col-6 col-md-2">{{ form.day_of_week }}</div>
      </div>
      <div class="row mb-3">
        {{ form.city.label_tag }}
        <div class="col-8 col-md-3">{{ form.city }}</div>
      </div>
      <div class="row mb-3">
        {{ form.state.label_tag }}
        <div class="col-8 col-md-3">{{ form.state }}</div>
      </div>
      <div class="row mb-3">
        {{ form.country.label_tag }}
        <div class="col-8 col-md-3">{{ form.country }}</div>
      </div>
      <div class="row mb-3">
        {{ form.musician.label_tag }}
        <div class="col-8 col-md-3">{{ form.musician }}</div>
      </div>
      <div class="row mb-3">
        {{ form.band.label_tag }}
        <div class="col-8 col-md-3">{{ form.band }}</div>
      </div>
      <div class="row mb-3">
        {{ form.conjunction.label_tag }}
        <div class="col-3 col-md-1">{{ form.conjunction }}</div>
      </div>
      {{ formset.management_form.as_p }}
      <div id="setlist-search">
        {% for form in formset.forms %}
          <div class="row mb-2" id="song_row-{{ forloop.counter0 }}">
            {% include "./setlist_form.html" with form=form prefix=forloop.counter0 %}
          </div>
        {% endfor %}
      </div>
      <button id="submit-button"
              type="submit"
              name="submit"
              class="btn btn-primary">Go</button>
      <button id="add-form-btn" type="button" name="add" class="btn btn-secondary">Add Row</button>
    </form>
    <div id="new_row" class="row invisible mb-2">
      {% include "./setlist_form.html" with form=formset.forms.0 prefix=0 %}
    </div>
  </div>
  {% load static %}
  <script src="{% static 'databruce/js/advanced_search.js' %}"></script>
  <script src="{% static 'databruce/js/setlist_search.js' %}"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      document.querySelectorAll("label").forEach(element => {
        element.classList.add("col-3","col-md-2","form-label","text-sm-end")
      });
    });

  </script>
{% endblock content %}

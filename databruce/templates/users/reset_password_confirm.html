{% extends "databruce/base.html" %}
{% load i18n %}
{% block title %}
  Reset Password
{% endblock title %}
{% block content %}
  <div class="card col-12 col-lg-4 mx-auto">
    <div class="card-header">{% translate "Password Change" %}</div>
    <div class="card-body">
      <div class="row">
        {% if validlink %}
          <form method="post">
            {% csrf_token %}
            <fieldset class="module aligned">
              <input class="hidden"
                     autocomplete="username"
                     value="{{ form.user.get_username }}">
              {% for field in form %}
                <div class="row mb-2">
                  <label class="form-label text-sm" for="{{ field.id_for_label }}">{% translate field.label %}</label>
                  {% if field.errors %}
                    <br>
                    <span class="text-sm text-danger">
                      {% for error in field.errors %}
                        {% translate error %}
                      {% endfor %}
                    </span>
                  {% endif %}
                  <div class="mx-auto">{{ field }}</div>
                </div>
              {% endfor %}
            </fieldset>
            <div class="submit-row">
              <div class="col-12">
                <button class="btn btn-sm btn-primary" type="submit">{% translate "Change Password" %}</button>
              </div>
            </div>
          </form>
        {% else %}
          <p class="text-sm">
            {% translate "The password reset link was invalid, possibly because it has already been used.  Please request a new password reset." %}
          </p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock content %}
